From f59ce431ac77096548dc8ad1214dfb5457484bf1 Mon Sep 17 00:00:00 2001
From: Vijay Anusuri <vanusuri@mvista.com>
Date: Mon, 15 Sep 2025 13:53:08 +0000
Subject: [PATCH] Mask CPUID support in HWCAP on aarch64

Upstream-Status: Pending

Signed-off-by: Jagadeesh Krishnanjanappa <jkrishnanjanappa@mvista.com>
---
 coregrind/m_initimg/initimg-linux.c | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/coregrind/m_initimg/initimg-linux.c b/coregrind/m_initimg/initimg-linux.c
index 483b7a3..f193fc0 100644
--- a/coregrind/m_initimg/initimg-linux.c
+++ b/coregrind/m_initimg/initimg-linux.c
@@ -734,6 +734,12 @@ Addr setup_client_stack( void*  init_sp,
                                | VKI_HWCAP_ASIMDDP)
                auxv->u.a_val &= ARM64_SUPPORTED_HWCAP;
             }
+#           elif defined(VGP_arm64_linux)
+            {
+               /* Linux 4.11 started pupulating this for arm64, but we
+                  currently don't support any. */
+               auxv->u.a_val = 0;
+            }
 #           endif
             break;
 #        if defined(VGP_ppc64be_linux) || defined(VGP_ppc64le_linux)
-- 
2.49.0

